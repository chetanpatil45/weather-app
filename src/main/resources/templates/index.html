<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather App</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>

    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #667eea, #764ba2);
        height: 100vh;
        margin: 0;
        overflow: hidden;
    }

    /* MAIN GLASS CONTAINER */
    .main-container {
        width: 95vw;
        height: 90vh;
        margin: 5vh auto;
        backdrop-filter: blur(25px);
        background: rgba(255,255,255,0.12);
        border-radius: 30px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.25);
        display: flex;
        padding: 60px;
        color: white;
        gap: 80px;
    }

    /* LEFT SECTION */
    .left-section {
        flex: 1.2;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    h1 {
        font-weight: 600;
        margin-bottom: 40px;
        font-size: 40px;
    }

    .search-box {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
    }

    .search-box input {
        flex: 1;
        padding: 12px 20px;
        border-radius: 25px;
        border: none;
        font-size: 16px;
    }

    .search-box button {
        padding: 12px 25px;
        border-radius: 25px;
        border: none;
        background: rgba(255,255,255,0.25);
        color: white;
        font-weight: 500;
        transition: 0.3s;
    }

    .search-box button:hover {
        background: rgba(255,255,255,0.4);
        transform: translateY(-2px);
    }

    .city-name {
        font-size: 26px;
        margin-top: 10px;
    }

    .temperature {
        font-size: 80px;
        font-weight: 600;
    }

    .description {
        font-size: 18px;
        opacity: 0.9;
        margin-bottom: 25px;
    }

    .info-row {
        display: flex;
        justify-content: space-between;
        background: rgba(255,255,255,0.08);
        padding: 12px 20px;
        border-radius: 15px;
        margin-bottom: 15px;
        font-size: 15px;
    }

    .show-more-btn {
        margin-top: 25px;
        padding: 12px 30px;
        border-radius: 30px;
        border: none;
        background: rgba(255,255,255,0.25);
        color: white;
        font-weight: 500;
        transition: 0.3s;
        width: fit-content;
    }

    .show-more-btn:hover {
        background: rgba(255,255,255,0.4);
        transform: translateY(-3px);
    }

    /* RIGHT SECTION */
    .right-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 25px;
    }

    .sun-box {
        background: rgba(255,255,255,0.08);
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        transition: 0.3s;
    }

    .sun-box:hover {
        background: rgba(255,255,255,0.18);
        transform: translateY(-5px);
    }

    .sun-box h4 {
        margin-bottom: 10px;
        font-weight: 500;
    }

    .sun-box p {
        font-size: 18px;
    }

    .error-message {
        margin-top: 10px;
        color: #ffdede;
    }

  </style>
</head>
<body>

<div class="main-container">

  <!-- LEFT SIDE -->
  <div class="left-section">

    <h1>ðŸŒ¤ Weather App</h1>

    <div class="search-box">
      <input type="text" id="cityInput" placeholder="Enter city name">
      <button onclick="getWeather()">Search</button>
    </div>

    <div id="weatherResult" style="display:none;">

      <div class="city-name" id="cityName"></div>
      <div class="temperature" id="temperature"></div>
      <div class="description text-capitalize" id="description"></div>

      <div class="info-row">
        <span>ðŸ’§ Humidity</span>
        <span id="humidity"></span>%
      </div>

      <div class="info-row">
        <span>ðŸŒ¬ Wind</span>
        <span id="wind"></span> m/s
      </div>

      <button class="show-more-btn" onclick="goToDetails()">
        Show More â†’
      </button>

    </div>

    <div id="errorMessage" class="error-message"></div>

  </div>

  <!-- RIGHT SIDE -->
  <div class="right-section">

    <div class="sun-box">
      <h4>ðŸŒ… Sunrise</h4>
      <p id="sunrise"></p>
    </div>

    <div class="sun-box">
      <h4>ðŸŒ‡ Sunset</h4>
      <p id="sunset"></p>
    </div>

  </div>

</div>

<script>

  function getWeather() {

      const city = document.getElementById("cityInput").value;

      if (!city) {
          alert("Please enter city name");
          return;
      }

      fetch("/weather/" + city)
          .then(response => {
              if (!response.ok) {
                  throw new Error("City not found");
              }
              return response.json();
          })
          .then(data => {

              document.getElementById("weatherResult").style.display = "block";
              document.getElementById("errorMessage").innerText = "";

              document.getElementById("cityName").innerText = data.name;
              document.getElementById("temperature").innerText =
                  Math.round(data.main.temp) + "Â°C";

              document.getElementById("description").innerText =
                  data.weather[0].description;

              document.getElementById("humidity").innerText =
                  data.main.humidity;

              document.getElementById("wind").innerText =
                  data.wind.speed;

              const sunriseTime = new Date(data.sys.sunrise * 1000);
              const sunsetTime = new Date(data.sys.sunset * 1000);

              document.getElementById("sunrise").innerText =
                  sunriseTime.toLocaleTimeString();

              document.getElementById("sunset").innerText =
                  sunsetTime.toLocaleTimeString();

          })
          .catch(error => {
              document.getElementById("weatherResult").style.display = "none";
              document.getElementById("errorMessage").innerText =
                  "City not found. Please try again.";
          });
  }

  function goToDetails() {
      const city = document.getElementById("cityName").innerText;
      window.location.href = "/info?city=" + city;
  }

</script>

</body>
</html>
